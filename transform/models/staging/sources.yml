## ---------------------------------------------------------------------------
## sources.yml
## This file tells dbt about the "raw" tables that already exist in the database.
## These tables are loaded via `dbt seed` from CSV files in the seeds/ directory.
## We declare them here so that downstream dbt models can reference them with 
## source('staging', 'members_raw') instead of hard‑coding schema.table names. 
## This adds lineage + enables tests.
## ---------------------------------------------------------------------------
version: 2

## Top-level list of source groups. Each group gets a name (used in source() calls)
## and (optionally) a schema + database override. Here all raw tables live in the
## Postgres schema named "staging".
sources:
  - name: staging          # Group name → use source('staging', 'claims_raw') in models
    schema: staging        # Physical schema where these raw tables live
    tables:
      - name: plans_raw        # Raw plan attributes loaded from seeds
        tests:
          - not_null: { column_name: plan_id }
      - name: providers_raw    # Raw provider data loaded from seeds
        tests:
          - not_null: { column_name: provider_id }
      - name: members_raw      # Raw member data loaded from seeds
        tests:
          - not_null: { column_name: member_id }
      - name: enrollments_raw  # Member enrollment periods loaded from seeds
        tests:
          - not_null: { column_name: enrollment_id }
      - name: claims_raw       # Claim transactions loaded from seeds
        tests:
          - not_null: { column_name: claim_id }
